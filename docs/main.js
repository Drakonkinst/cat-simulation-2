let e=5;const t={setLevel(t){e=t},severe(t){e>=1&&console.error(t)},warn(t){e>=2&&console.warn(t)},info(t){e>=3&&console.log(t)},fine(t){e>=4&&console.log(t)},finer(t){e>=5&&console.log(t)}},n={version:'2.000',saveKey:'game',options:{instantButtons:!1,fasterButtons:!1,fasterTasks:!1,skipIntro:!1,loggerLevel:5}};let o={},i=null,s=null,l=null;function a(e){$('<div>').addClass('notification').css('opacity',0).text(e).prependTo(i).animate({opacity:1},500,'linear',(function(){!function(){let e=s.position().top+s.outerHeight(!0);$('.notification').each((function(){let t=$(this);t.position().top>e&&t.remove()}))}()}))}function r(e){return e.length>0&&!('.!?'.indexOf(e.slice(-1))>-1)&&(t.warn('Message '+e+' does not end with punctuation'),e+='.'),e}function d(e='',t=null,n){e=r(e),null!=t&&S.currentArea!=t?n||(o.hasOwnProperty(t)||(o[t]=[]),o[t].push(e)):a(e)}function c(e){e=r(e),l.stop().text(e).css('opacity',1).animate({opacity:0},3e3,'linear')}function u(e=3e3){$('.notification').stop().animate({opacity:0},e,'linear',(function(){$(this).remove()}))}var h=(()=>{var e=String.fromCharCode,t='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',n='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$',o={};function i(e,t){if(!o[e]){o[e]={};for(var n=0;n<e.length;n++)o[e][e.charAt(n)]=n}return o[e][t]}var s={compressToBase64:e=>{if(null==e)return'';var n=s._compress(e,6,(e=>t.charAt(e)));switch(n.length%4){default:case 0:return n;case 1:return n+'===';case 2:return n+'==';case 3:return n+'='}},decompressFromBase64:e=>null==e?'':''==e?null:s._decompress(e.length,32,(n=>i(t,e.charAt(n)))),compressToUTF16:t=>null==t?'':s._compress(t,15,(t=>e(t+32)))+' ',decompressFromUTF16:e=>null==e?'':''==e?null:s._decompress(e.length,16384,(t=>e.charCodeAt(t)-32)),compressToUint8Array:e=>{for(var t=s.compress(e),n=new Uint8Array(2*t.length),o=0,i=t.length;o<i;o++){var l=t.charCodeAt(o);n[2*o]=l>>>8,n[2*o+1]=l%256}return n},decompressFromUint8Array:t=>{if(null==t)return s.decompress(t);for(var n=new Array(t.length/2),o=0,i=n.length;o<i;o++)n[o]=256*t[2*o]+t[2*o+1];var l=[];return n.forEach((t=>{l.push(e(t))})),s.decompress(l.join(''))},compressToEncodedURIComponent:e=>null==e?'':s._compress(e,6,(e=>n.charAt(e))),decompressFromEncodedURIComponent:e=>null==e?'':''==e?null:(e=e.replace(/ /g,'+'),s._decompress(e.length,32,(t=>i(n,e.charAt(t))))),compress:t=>s._compress(t,16,(t=>e(t))),_compress:(e,t,n)=>{if(null==e)return'';var o,i,s,l={},a={},r='',d='',c='',u=2,h=3,p=2,f=[],m=0,g=0;for(s=0;s<e.length;s+=1)if(r=e.charAt(s),Object.prototype.hasOwnProperty.call(l,r)||(l[r]=h++,a[r]=!0),d=c+r,Object.prototype.hasOwnProperty.call(l,d))c=d;else{if(Object.prototype.hasOwnProperty.call(a,c)){if(c.charCodeAt(0)<256){for(o=0;o<p;o++)m<<=1,g==t-1?(g=0,f.push(n(m)),m=0):g++;for(i=c.charCodeAt(0),o=0;o<8;o++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}else{for(i=1,o=0;o<p;o++)m=m<<1|i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i=0;for(i=c.charCodeAt(0),o=0;o<16;o++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}0==--u&&(u=Math.pow(2,p),p++),delete a[c]}else for(i=l[c],o=0;o<p;o++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1;0==--u&&(u=Math.pow(2,p),p++),l[d]=h++,c=String(r)}if(''!==c){if(Object.prototype.hasOwnProperty.call(a,c)){if(c.charCodeAt(0)<256){for(o=0;o<p;o++)m<<=1,g==t-1?(g=0,f.push(n(m)),m=0):g++;for(i=c.charCodeAt(0),o=0;o<8;o++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}else{for(i=1,o=0;o<p;o++)m=m<<1|i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i=0;for(i=c.charCodeAt(0),o=0;o<16;o++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}0==--u&&(u=Math.pow(2,p),p++),delete a[c]}else for(i=l[c],o=0;o<p;o++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1;0==--u&&(u=Math.pow(2,p),p++)}for(i=2,o=0;o<p;o++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1;for(;;){if(m<<=1,g==t-1){f.push(n(m));break}g++}return f.join('')},decompress:e=>null==e?'':''==e?null:s._decompress(e.length,32768,(t=>e.charCodeAt(t))),_decompress:(t,n,o)=>{var i,s,l,a,r,d,c,u=[],h=4,p=4,f=3,m='',g=[],v={val:o(0),position:n,index:1};for(i=0;i<3;i+=1)u[i]=i;for(l=0,r=Math.pow(2,2),d=1;d!=r;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=o(v.index++)),l|=(a>0?1:0)*d,d<<=1;switch(l){case 0:for(l=0,r=Math.pow(2,8),d=1;d!=r;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=o(v.index++)),l|=(a>0?1:0)*d,d<<=1;c=e(l);break;case 1:for(l=0,r=Math.pow(2,16),d=1;d!=r;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=o(v.index++)),l|=(a>0?1:0)*d,d<<=1;c=e(l);break;case 2:return''}for(u[3]=c,s=c,g.push(c);;){if(v.index>t)return'';for(l=0,r=Math.pow(2,f),d=1;d!=r;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=o(v.index++)),l|=(a>0?1:0)*d,d<<=1;switch(c=l){case 0:for(l=0,r=Math.pow(2,8),d=1;d!=r;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=o(v.index++)),l|=(a>0?1:0)*d,d<<=1;u[p++]=e(l),c=p-1,h--;break;case 1:for(l=0,r=Math.pow(2,16),d=1;d!=r;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=o(v.index++)),l|=(a>0?1:0)*d,d<<=1;u[p++]=e(l),c=p-1,h--;break;case 2:return g.join('')}if(0==h&&(h=Math.pow(2,f),f++),u[c])m=u[c];else{if(c!==p)return null;m=s+s.charAt(0)}g.push(m),u[p++]=s+m.charAt(0),s=m,0==--h&&(h=Math.pow(2,f),f++)}}};return s})();let p={},f=!1;function m(e){let t=e.split(/[.\[\]'"]+/);for(let e=t.length-1;e>=0;--e)t[e].length<=0&&t.splice(e,1);return t}function g(){setInterval(v,6e4)}function v(e=!1){if(f||e){let e=h.compressToUTF16(JSON.stringify(p));localStorage.setItem(n.saveKey,e),f=!1,c('saved.'),t.finer('Saved.')}}function w(e){p=e,v(),t.finer('Loaded state.'),t.finer(p)}function b(){w(JSON.parse(h.decompressFromUTF16(localStorage.getItem(n.saveKey))))}function y(e,t=null){let n=m(e),o=p,i=null;for(let e=0;e<n.length;++e){if(i=n[e],'object'==typeof o&&!o.hasOwnProperty(i))return t;o=o[i]}return o}function x(e,n){return function(e,n){let o,i=m(e),s=p,l=null;for(o=0;o<i.length-1;++o)l=i[o],s.hasOwnProperty(l)||(s[l]={}),s=s[l];l=i[o];let a=s.hasOwnProperty(l);return s[l]=n,f=!0,t.finer('SET '+e+' = '+n),!a}(e,n)}function C(e,n){let o=y(e,0);isNaN(o)?t.severe('Tried to add to "'+e+'" which is not a number.'):x(e,o+n)}var k=Object.freeze({__proto__:null,startAutoSave:g,save:v,load:w,loadFromLocalStorage:b,remove:function(e){let n,o=m(e),i=p,s=null;for(n=0;n<o.length-1;++n){if(s=o[n],!i.hasOwnProperty(s))return!1;i=i[s]}s=o[n];let l=i.hasOwnProperty(s);return l&&(delete i[s],stateChanged=!0,t.finer('REMOVE '+e)),l},get:y,set:x,add:C,getState:function(){return p},printSize:function(){v(),t.info('Compressed Size: '+new Blob(Object.values(localStorage.getItem(n.saveKey))).size/1e3+'kb'),t.info('Uncompressed Size: '+new Blob([JSON.stringify(p)]).size/1e3+'kb')},addItem:function(e,t){C('player.inventory['+e+']',t)},hasItem:function(e,t=1){return y('player.inventory['+e+']',0)>=t}});function T(e){return $(e.target).hasClass('menu-btn')}function A(){return!0}const S={keyLock:!1,navigation:!0,darkMode:!1,darkArea:!1,currentArea:null};function O(e){e?(S.darkMode=!0,$('body').addClass('dark')):(S.darkMode=!1,$('body').removeClass('dark'))}function L(e=null){S.darkArea=e,2==y('options.lights')&&O(!!e)}function I(e){return Math.random()<e}function E(e,t){return e==t?e:Math.random()*(t-e)+e}function M(e,t){return Math.floor(E(e,t))}function P(e){return e[M(0,e.length)]}const _={'american shorthair':{tendencies:['quiet','friendly','playful','calm'],coatColors:['black','blue','silver','brown','tabby'],coatTextures:['short','dense','hard','lustrous'],eyeColors:['blue','copper','green','gold','hazel'],size:'medium'},burmese:{tendencies:['playful','friendly','curious'],coatColors:['blue','platinum','champagne','sable','lilac','fawn','red','cream','chocolate','cinnamon'],coatTextures:['short','silky','glossy','satin'],eyeColors:['gold','yellow'],size:'medium'},'scottish fold':{tendencies:['playful','friendly'],coatColors:['white','blue','black','red','cream','silver'],coatTextures:['short','dense','plush','soft'],eyeColors:['blue','green','gold','bicolored'],size:'medium'},sphinx:{tendencies:['curious','friendly','quiet'],coatColors:['white','black','blue','red','cream','chocolate','lavender'],coatTextures:['hairless','fine'],eyeColors:['blue','red','green','black','pink','grey'],size:'medium'}},N=Object.keys(_),F=['miso','lola','mcgonagall','tara','nala','mistie','misty','coco','tasha','raven','valencia','princess','cherry','chloe','felicia','olivia','emma','belle','luna','minerva','ellie','athena','artemis','poppy','venus','calypso','elise','kathy','elizabeth','hope'],z=['garfield','orpheus','salem','tom','azrael','whiskers','felix','oscar','edgar','sox','ollie','leo','snickers','charcoal','prince','toby','mikesch','buddy','romeo','loki','gavin','momo','illia','theodore','eliot','milo','max','monty','zeke'],j=['lolcat','sesame','unagi','avocado','mango','oreo','swirly','striped','lucky','mittens','angel','dakota','ginger','tippy','snickers','fish','smokey','muffin','fuzzy','nibbles','chaser','pouncer','buttercup'],B=['lazy','playful','loud','quiet','friendly','jumpy','calm','antisocial','curious','active','chaotic','purring','affectionate','intelligent','shy','suspicious','gentle','aggressive','vigilant','hunter','social','dominant'],V=['food','water','litterbox','play','affection','nap'];function U(e){let t=V.indexOf(e);if(t<0)throw'Unknown need "'+e+'"';return t}function D({name:e=null,generateName:t=!0,isFemale:n=I(.5),breed:o=P(N),happiness:i=M(0,101),trust:s=M(0,21),weightClass:l=2}={}){let a=(r=46656*Math.random()|0,d=46656*Math.random()|0,(r=('000'+r.toString(36)).slice(-3))+('000'+d.toString(36)).slice(-3));var r,d;if(null==e&&t){e=P((n?F:z).concat(j))}let c=_[o],u=P(c.coatColors),h=P(c.coatTextures),p=P(c.coatTextures),f=function(e){let t=[];for(let n=0;n<B.length;++n){let o=B[n];e.includes(o)?I(.7)&&t.push(n):I(.02)&&t.push(n)}for(;t.length>5;){let e=M(0,t.length);t.splice(e,1)}return t}(c.tendencies),m=100*l+M(0,100);return new H(a,e,n,o,u,h,p,f,null,null,null,null,null,null,i,s,m)}class H{constructor(e,t,n,o,i,s,l,a=[],r,d,c,u,h,p,f,m,g){this.id=e,this.data={name:t,isFemale:n,breed:o,coatColor:i,coatTexture:s,eyeColor:l,traits:a,needs:[r,d,c,u,h,p],happiness:f,trust:m,weight:g},this.traits=function(e){let t=new Set;for(let n of e)t.add(B[n]);return t}(this.data.traits),this.lastFoodBowl=null,this.lastWaterBowl=null,this.lastLitterbox=null,this.lastNapSpot=null,this.isSleeping=null,this.currentNeed=null}getHighestNeed(){let e=null,t=-999;for(let n=0;n<V.length;++n){let o=this.data.needs[n];o>t&&(t=o,e=V[n])}return e}setNeed(e,t){let n=U(e);return this.data.needs[n]=t,t}addNeed(e,t){let n=U(e),o=this.needs[n]+t;return this.data.needs[n]=o,o}getNeed(e){let t=U(e);return this.data.needs[t]}}const K={},R={};function q(){}class J{constructor({id:e=null,cooldown:n=0,saveCooldown:o=!1,onClick:i=q,onFinish:s=q,text:l='button',tooltip:a=null,width:r=null}={}){this.id=e,this.cooldown=n,this.onCooldown=this.cooldown>0,this.saveCooldown=o,this.element=function(e,t){let n=$('<div>').addClass('button').text(t).on('click',(()=>e.click()));return $('<div>').addClass('cooldown').appendTo(n),n}(this,l),this.onClick=i,this.onFinish=s,null==this.id&&this.saveCooldown&&t.warn('Button with no ID cannot save cooldown'),this.setTooltip(a),null!=this.id&&this.element.addClass('button_'+this.id),null!=r&&this.element.css('width',r),null!=this.id&&K.hasOwnProperty(this.id)&&this.startCooldown(K[this.id])}static getButton(e){return R[e]}static saveSavedCooldowns(){return JSON.stringify(K)}static loadSavedCooldowns(e){K=JSON.parse(e)}setText(e){return this.element.text(e),this}setTooltip(e){return null!=this.tooltip&&(this.element.removeChild(this.tooltip.element),this.tooltip=null),null!=e&&e.exists()&&(this.tooltip=e,this.tooltip.appendTo(this.element)),this}setCooldown(e){return this.cooldown=e,this}appendTo(e){return this.element.appendTo(e),this}startCooldown(e=null){let t=this.cooldown,n=100;if(null==e||e>t?e=t:n=e/t*100,t<=2)return void this.finish();this.clearCooldown();let o=this;if(this.element.find('.cooldown').width(n+'%').animate({width:'0%'},e,'linear',(()=>{o.clearCooldown(),o.finish()})),this.saveCooldown){K[this.id]=.001*e;let t=setInterval((function(){if(K[this.id]-.5<0)return delete K[this.id],void clearInterval(t);var e,n;K[this.id]=(e=K[this.id]-.5,n=2,+e.toFixed(n))}),500)}this.onCooldown=!0,this.setDisabled(!0)}click(){if(!this.element.hasClass('disabled')){let e=this.onClick();(null==e||e)&&this.startCooldown()}}finish(){this.onFinish()}clearCooldown(){this.onCooldown=!1,this.setDisabled(!1)}setDisabled(e){return e||this.onCooldown?e&&this.element.addClass('disabled'):this.element.removeClass('disabled'),this}}let W=null,Q=null,G=[],X=[],Y=new Set,Z=null;function ee(){return X.length>0?X[0]:null}function te(){return ee().eventPanel}function ne(){if(X.length<=0){let e=[];for(let t of G)t.isAvailable()&&e.push(t);if(!(e.length>0))return void null.scheduleNext(.5);oe(function(e,t=1,n='weight'){let o=0;for(let i of e)i.hasOwnProperty(n)?o+=i[n]:o+=t;let i=E(0,o),s=0,l=0;for(;s<i;){let o=e[l++];o.hasOwnProperty(n)?s+=o[n]:s+=t}return e[l-1]}(e))}null.scheduleNext()}function oe(e,t=!1){if(null!=e.id){if(Y.has(e.id))return;Y.add(e.id)}S.keyLock=!0,S.navigation=!1,t?X.unshift(e):X.push(e),e.eventPanel=$('<div>').addClass('event event-panel').css('opacity',0),$('<div>').addClass('event-title').text(e.title).appendTo(e.eventPanel),$('<div>').addClass('event-description').appendTo(e.eventPanel),$('<div>').addClass('event-buttons').appendTo(e.eventPanel),'function'==typeof e.getContext&&(e.context=e.getContext());let n=ce('start',e);null!=n.notification&&d(n.notification),(X.length<=1||t)&&se()}function ie(e){let t=te();$('div.event-title',t).text(e)}function se(){ae('start',!0);let e=te();e.appendTo(Z),$('.event-panel').css('opacity',0),e.animate({opacity:1},200,'linear'),ce(W).blink&&function(){let e=document.title;if(null!=Q)return;Q=setInterval((()=>{document.title='*** EVENT ***',setTimeout((()=>{document.title=e}),1500)}),3e3)}()}function le(){let e=te();e.animate({opacity:0},200,'linear',(()=>{e.remove();let n=ee();delete n.eventPanel,delete n.context,X.shift(),null!=n.id&&Y.delete(n.id),X.length>0?(se(),t.finer(X.length+' events remaining')):(null!=Q&&(clearInterval(Q),Q=null),S.keyLock=!1,S.navigation=!0,$('body').trigger('focus'))}))}function ae(e,n=!1){t.finer('Loading scene: '+e),W=e;let o=ce(e),i=te();'function'==typeof o.onLoad&&o.onLoad(),null==o.notification||n||d(o.notification),null!=o.eventTitle&&$('.event-title',i).text(o.eventTitle),$('.event-description',i).empty(),$('.event-buttons',i).empty(),function(e){let t=te(),n=$('.event-description',t);for(let t=0;t<e.text.length;++t)$('<div>').text(e.text[t]).appendTo(n);if(null!=e.input){document.onselectstart=T,document.onmousedown=T;let t=$('<input>').attr({type:'text',name:'input',spellcheck:!1,placeholder:e.input}).appendTo(n);null!=e.maxinput&&t.attr('maxlength',e.maxinput),$('<div>').addClass('input-result').css('opacity',0).appendTo(n),n.find('input').trigger('focus').trigger('select')}let o=$('<div>').addClass('exit-buttons').appendTo($('.event-buttons',t));null!=e.buttons&&function(e,t){for(let n in e){if(e.hasOwnProperty(n)){let o=e[n],i=o.text;null==i&&(i=n);let s=new J({id:n,text:i,tooltip:o.tooltip||null,onClick:function(){de(this)},cooldown:o.cooldown}).appendTo(t);null!=o.cooldown&&s.startCooldown()}re()}}(e.buttons,o);$('<div>').addClass('clear').appendTo(o)}(o)}function re(){let e=ce(W).buttons;for(let t in e)if(e.hasOwnProperty(t)){let n=J.getButton(t),o=e[t];null==o.available||o.available()||n.setDisabled(!0)}}function de(e){let n=ce(W),o=n.buttons[e.id];if(null!=o.click){let e=o.click();if(null!=e&&!e){if('string'==typeof e)if(null==n.input)d(e);else{let t=te().find('.input-result');0==t.css('opacity')&&(e=r(e),t.text(e).css('opacity',1).animate({opacity:0},1500,'linear'))}return}null!=n.input&&'end'==o.nextScene&&(document.onselectstart=A,document.onmousedown=A)}if(re(),null!=o.notification&&d(o.notification),null!=o.nextScene)if('end'==o.nextScene)e.setDisabled(!0),le();else if('string'==typeof o.nextScene)ae(o.nextScene);else{let e=function(e){let t=0;for(let n in e)e.hasOwnProperty(n)&&(t+=e[n]);let n=E(0,t),o=0;for(let t in e)if(e.hasOwnProperty(t)&&(o+=e[t],o>=n))return t;return null}(o.nextScene);if(null==e)return t.severe('No suitable scene found after "'+W+'"'),void le();ae(e)}}function ce(e,t=null){let n=(t=t||ee()).scenes[e];return'function'==typeof n?n(t.context):n}const ue={};class he{constructor(e,t){this.id=e,this.name=t,this.isVisible=!0,this.element=null,this.buttonElement=null,this.onLoadCallback=()=>{},this.onArrivalCallback=()=>{}}onLoad(e){return null==e?this.onLoadCallback(this):this.onLoadCallback=e,this}onArrival(e){return null==e?this.onArrivalCallback(this):this.onArrivalCallback=e,this}setName(e,t=!1){this.name=e,this.buttonElement.text(this.name),t&&this.buttonElement.hide().fadeIn(500,'linear')}setVisible(e){return this.isVisible=e,null==this.element||null==this.buttonElement||(e?this.buttonElement.fadeIn(500,'linear'):this.buttonElement.hide()),this}}class pe{constructor(e,t){this.id=e,this.name=t,this.locations=[],this.currentIndex=-1,this.isVisible=!0,this.element=null,this.buttonElement=null}Init(){for(let e of this.locations)e.onLoad(),e.setVisible(e.isVisible);this.goToLocation(0)}onArrival(e){!function(e){if(o.hasOwnProperty(e))for(;o[e].length;)Notifications.printMessage(o[e].shift())}(this.id)}addLocation(e){this.locations.push(e)}addLocations(...e){for(let t of e)this.addLocation(t)}getLocation(e){return e<0||e>=this.locations.length?null:this.locations[e]}goToLocation(e){if(e<0||e>=this.locations.length)return void t.warn('Tried to go to invalid location index '+e);if(this.currentIndex==e)return;let n=this.locations[e];this.element.find('.location-button').removeClass('selected'),n.buttonElement.addClass('selected');let o=this.element.find('.location-content .location-slider'),i=o.find('.location').index(n.element),s=this.currentIndex>-1?this.currentIndex:0,l=Math.abs(i-s);o.animate({top:-624*i+'px'},300*l),n.onArrival(),this.currentIndex=e}createElement(){if(null!=this.element)return this.element;let e=$('<div>').addClass('area-panel area-panel_'+this.id),t=$('<div>').addClass('location-select').appendTo(e),n=$('<div>').addClass('location-content').appendTo(e),o=$('<div>').addClass('location-slider').appendTo(n),i=this;for(let e=0;e<this.locations.length;++e){let n=this.locations[e];n.buttonElement=$('<div>').addClass('location-button location-button_'+n.id).text(n.name).on('click',(()=>{i.goToLocation(e)})).appendTo(t),n.element=$('<div>').addClass('location location_'+n.id).appendTo(o)}return this.element=e,e}setName(e,t=!1){this.name=e,this.buttonElement.text(this.name),t&&this.buttonElement.hide().fadeIn(500,'linear')}setVisible(e){return this.isVisible=e,null==this.element||null==this.buttonElement||(e?(this.buttonElement.fadeIn(200,'linear'),this.element.show()):(this.buttonElement.hide(),this.element.hide())),this}}function fe(e){let t=$('<div>').addClass('area-button area-button_'+e.id).text(e.name).on('click',(()=>{me(e.id)})).appendTo('.area-select');e.buttonElement=t,e.createElement().appendTo('.area-slider'),ue[e.id]=e}function me(e){if(S.currentArea==e)return;t.finer('Traveling to area '+e);let n=ue[e];if(null==n)return void t.severe('Invalid area '+e);$('.area-button').removeClass('selected'),n.buttonElement.addClass('selected');let o=$('.area-slider'),i=$('.area-panel').index(n.element),s=null==S.currentArea?0:$('.area-panel').index(ue[S.currentArea].element),l=Math.abs(i-s);o.animate({left:-700*i+'px'},300*l),S.currentArea=e,n.onArrival(l)}const ge=['a blue sea, waves gently lapping against the shore','dark and stormy nights','dreamed of a blazing inferno, heat unbearable','bright skies and lazy clouds','crackling thunder and pouring rain','soft flakes of snow','merciless ice hurtling from the sky','soft whispers and a warm embrace','fish swimming across the sky','a hunter stalking its prey','a world covered in ash','a land of unyielding stone, not a blade of grass in sight','a blazing radiance, the heat of the sun\'s fury','crimson mist and a wolf\'s howl','a trident buried deep in the sea','a field of stars, glistening in the darkness'];class ve{constructor(e='bottom left'){this.element=$('<div>').addClass('tooltip '+e)}addText(e){return $('<div>').text(e).appendTo(this.element),this}addCost(e,t){return $('<div>').addClass('row_key').text(e).appendTo(this.element),$('<div>').addClass('row_val').text(t).appendTo(this.element),this}append(e){return this.element.append(e),this}appendTo(e){return this.element.appendTo(e),this}exists(){return this.element.children().length>0}}const we=['dreamed of white sails flying in the salty air.','dreamed of stormy seas and raging tides.','dreamed of a bottomless abyss, rays of light fading away.'],be=['something purrs softly.','feather-soft whiskers brush past.','purring grows more insistent.','something paws gently.'];function ye(e){let t=y('progress.intro.step',0),n=e.getLocation(0);if(n.setName(''),e.setName(''),t<=3){let o=function(e,t){const n=new J({id:'intro',text:'wake up',cooldown:5e3,onClick:()=>{let e=y('progress.intro.step',0);if(e<we.length){d(we[e])}else d('the world beckons, and dreams start to fade.'),u()},onFinish:()=>{C('progress.intro.step',1);let o=y('progress.intro.step');o==we.length&&xe(e,n),o>=4&&(n.element.remove(),$('.button_random-dream').remove(),$e(e,t))}}).appendTo(e.element);return n}(n,e);3==t&&xe(n,o)}t>=4&&$e(n,e)}function xe(e,t){d('dream\'s embrace is inviting. would be so nice to give in, just for a while longer.');let n=3;const o=new J({id:'random-dream',text:'dream',cooldown:5e3,onClick:()=>{d('dreamed of '+P(ge)+'.')},onFinish:()=>{--n<=0&&(u(),d('dreams fade away like fleeting memories.'),o.setDisabled(!0))}});return o.element.prependTo(e.element),Ce=setTimeout(Te,1e4),t.setCooldown(8e3),v(),o}let Ce=null,ke=0;function Te(){d(be[ke]),ke=(ke+1)%be.length,Ce=setTimeout(Te,E(1e4,2e4))}function $e(e,t){t.setName('A Dark Room',!0),new J({id:'sleep',text:'sleep',cooldown:6e4}).appendTo(e.element).setTooltip((new ve).addText('slept enough for now.')).setDisabled(!0),function(e){const t=new J({id:e.id+'-lights',text:'lights on',onClick:()=>{let n='house.room_'+e.id+'.lights',o=y(n,!1);o?(t.setText('lights on'),L(!0)):(t.setText('lights off'),L(!1)),x(n,!o)}});return t}(e).appendTo(e.element).element.one('click',(()=>{t.setName('A Lonely Room')})),L(!0),u(),d('the room is cold.'),setTimeout((()=>{d('a curious face peeks up between the bedsheets.'),oe({title:'A Curious Face',scenes:{start:{text:['a strange creature looks up at you inquisitively.'],buttons:{hello:{text:'say hello',click:()=>{d('nothing here yet.')},nextScene:'end'}}}}})}),3e3),clearTimeout(Ce),Ce=null,v()}class Ae extends he{constructor(e,t){super(e,t)}}const Se=new pe('house','');function Oe(){const e=new Ae('bedroom','Bedroom').onLoad((e=>{y('progress.intro.finished',!1)||ye(Se),new J({text:'cat',onClick:()=>{let e=D();!function(e){x('house.cats['+e.id+']',e.data)}(e),t.info(e)}}).appendTo(e.element)}));Se.addLocations(e,new Ae('hallway','Hallway').setVisible(!1)),fe(Se),Se.Init()}const Le=new pe('town','A Quiet Town');function Ie(){!function(){let e=$('.main');$('<div>').addClass('area-select').appendTo(e),$('<div>').addClass('area-slider').appendTo(e)}(),Oe(),Le.addLocations(new he('store','Store').onLoad((()=>{})),new he('park','Park')),fe(Le),Le.Init(),Le.setVisible(!1),function(){let e=$('.area-slider');e.width(700*e.children().length+'px')}()}function Ee(){let e=$('<div>').addClass('footer').appendTo('body');$('<span>').addClass('footer-button version').text('v'+n.version).appendTo(e),$('<span>').addClass('footer-button github').text('github.').on('click',(()=>{window.open('https://github.com/Drakonkinst/cat-simulation-2')})).appendTo(e),$('<span>').addClass('footer-button').text('discord.').on('click',(()=>{window.open('https://discord.gg/Wrp7Fre')})).appendTo(e),$('<span>').addClass('footer-button').text('options.').on('click',(()=>{oe({title:'Options',id:'options',getContext:()=>y('options.lights',0),scenes:{start:e=>({text:['set to heart\'s desire.'],onLoad:()=>{ie('Options')},buttons:{lights:{text:Me(e),click:()=>{let e=y('options.lights',0);var t;e=(e+1)%3,x('options.lights',t=e),0==t?O(!1):1==t?O(!0):2==t&&L(S.darkArea),$('.button.button_lights').text(Me(e))}},save:{nextScene:'export_import',click:()=>{v()}},restart:{nextScene:'confirm_restart'},close:{nextScene:'end'}}}),confirm_restart:{text:['restart the game?'],onLoad:()=>{ie('Restart?')},buttons:{yes:{click:()=>{localStorage.removeItem(n.saveKey),location.reload()},nextScene:'end'},no:{nextScene:'start'}}},export_import:{text:['export or import save data','for backing up or migrating computers'],onLoad:()=>{ie('Export / Import')},buttons:{export:{click:()=>{d('nothing here yet.')}},import:{click:()=>{d('nothing here yet.')}},cancel:{nextScene:'start'}}}}},!0)})).appendTo(e)}function Me(e){let t='lights: ';return 0==e?t+='on':1==e?t+='off':2==e&&(t+='adaptive'),t}function Pe(){t.setLevel(n.options.loggerLevel),Ee(),i=$('<div>').addClass('notifications').appendTo('.wrapper'),s=$('<div>').addClass('notify-gradient').appendTo(i),l=$('<div>').addClass('quick-notify').appendTo('.wrapper'),localStorage.hasOwnProperty(n.saveKey)?b():(x('world.day',1),x('options.lights',0),x('progress.unlocked.town',!1)),Z=$('<div>').addClass('events').appendTo('.wrapper'),Ie(),g(),window.$SM=k}$((()=>{Pe(),me('house'),new J({text:'Hello, world!',tooltip:(new ve).addCost('soul',1).addText('something\'s out there.'),cooldown:1e3,onClick:()=>{t.info('Hello, world!'),d('Hello, world!'),c('Hello, world!'),ne()}})}));
//# sourceMappingURL=main.js.map
